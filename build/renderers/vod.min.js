/*!
 * MediaElement.js
 * http://www.mediaelementjs.com/
 *
 * Wrapper that mimics native HTML5 MediaElement (audio and video)
 * using a variety of technologies (pure JavaScript, Flash, iframe)
 *
 * Copyright 2010-2017, John Dyer (http://j.hn/)
 * License: MIT
 *
 */
!function e(t,r,n){function o(a,i){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!i&&u)return u(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[a]={exports:{}};t[a][0].call(f.exports,function(e){var r=t[a][1][e];return o(r||e)},f,f.exports,e,t,r,n)}return r[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){},{}],2:[function(e,t,r){(function(r){var n,o=void 0!==r?r:"undefined"!=typeof window?window:{},s=e(1);"undefined"!=typeof document?n=document:(n=o["__GLOBAL_DOCUMENT_CACHE@4"])||(n=o["__GLOBAL_DOCUMENT_CACHE@4"]=s),t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1}],3:[function(e,t,r){(function(e){var r;r="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,r){(function(e){!function(n){function o(e){throw new RangeError(C[e])}function s(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function a(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+s((e=e.replace(N,".")).split("."),t).join(".")}function i(e){for(var t,r,n=[],o=0,s=e.length;o<s;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<s?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function u(e){return s(e,function(e){var t="";return e>65535&&(t+=U((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=U(e)}).join("")}function l(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:E}function f(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function c(e,t,r){var n=0;for(e=r?L(e/F):e>>1,e+=L(e/t);e>R*_>>1;n+=E)e=L(e/R);return L(n+(R+1)*e/(e+w))}function h(e){var t,r,n,s,a,i,f,h,d,p,m=[],v=e.length,y=0,g=O,w=A;for((r=e.lastIndexOf(k))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&o("not-basic"),m.push(e.charCodeAt(n));for(s=r>0?r+1:0;s<v;){for(a=y,i=1,f=E;s>=v&&o("invalid-input"),((h=l(e.charCodeAt(s++)))>=E||h>L((S-y)/i))&&o("overflow"),y+=h*i,d=f<=w?b:f>=w+_?_:f-w,!(h<d);f+=E)i>L(S/(p=E-d))&&o("overflow"),i*=p;w=c(y-a,t=m.length+1,0==a),L(y/t)>S-g&&o("overflow"),g+=L(y/t),y%=t,m.splice(y++,0,g)}return u(m)}function d(e){var t,r,n,s,a,u,l,h,d,p,m,v,y,g,w,F=[];for(v=(e=i(e)).length,t=O,r=0,a=A,u=0;u<v;++u)(m=e[u])<128&&F.push(U(m));for(n=s=F.length,s&&F.push(k);n<v;){for(l=S,u=0;u<v;++u)(m=e[u])>=t&&m<l&&(l=m);for(l-t>L((S-r)/(y=n+1))&&o("overflow"),r+=(l-t)*y,t=l,u=0;u<v;++u)if((m=e[u])<t&&++r>S&&o("overflow"),m==t){for(h=r,d=E;p=d<=a?b:d>=a+_?_:d-a,!(h<p);d+=E)w=h-p,g=E-p,F.push(U(f(p+w%g,0))),h=L(w/g);F.push(U(f(h,0))),a=c(r,y,n==s),r=0,++n}++r,++t}return F.join("")}var p="object"==typeof r&&r&&!r.nodeType&&r,m="object"==typeof t&&t&&!t.nodeType&&t,v="object"==typeof e&&e;v.global!==v&&v.window!==v&&v.self!==v||(n=v);var y,g,S=2147483647,E=36,b=1,_=26,w=38,F=700,A=72,O=128,k="-",I=/^xn--/,T=/[^\x20-\x7E]/,N=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=E-b,L=Math.floor,U=String.fromCharCode;if(y={version:"1.4.1",ucs2:{decode:i,encode:u},decode:h,encode:d,toASCII:function(e){return a(e,function(e){return T.test(e)?"xn--"+d(e):e})},toUnicode:function(e){return a(e,function(e){return I.test(e)?h(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return y});else if(p&&m)if(t.exports==p)m.exports=y;else for(g in y)y.hasOwnProperty(g)&&(p[g]=y[g]);else n.punycode=y}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,s){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var i=/\+/g;e=e.split(t);var u=1e3;s&&"number"==typeof s.maxKeys&&(u=s.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var f=0;f<l;++f){var c,h,d,p,m=e[f].replace(i,"%20"),v=m.indexOf(r);v>=0?(c=m.substr(0,v),h=m.substr(v+1)):(c=m,h=""),d=decodeURIComponent(c),p=decodeURIComponent(h),n(a,d)?o(a[d])?a[d].push(p):a[d]=[a[d],p]:a[d]=p}return a};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],6:[function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,i){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(a(e),function(a){var i=encodeURIComponent(o(a))+r;return s(e[a])?n(e[a],function(e){return i+encodeURIComponent(o(e))}).join(t):i+encodeURIComponent(o(e[a]))}).join(t):i?encodeURIComponent(o(i))+r+encodeURIComponent(o(e)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],7:[function(e,t,r){"use strict";r.decode=r.parse=e(5),r.encode=r.stringify=e(6)},{5:5,6:6}],8:[function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,r){if(e&&a.isObject(e)&&e instanceof n)return e;var o=new n;return o.parse(e,t,r),o}var s=e(4),a=e(9);r.parse=o,r.resolve=function(e,t){return o(e,!1,!0).resolve(t)},r.resolveObject=function(e,t){return e?o(e,!1,!0).resolveObject(t):t},r.format=function(e){return a.isString(e)&&(e=o(e)),e instanceof n?e.format():n.prototype.format.call(e)},r.Url=n;var i=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","\t"],c=["{","}","|","\\","^","`"].concat(f),h=["'"].concat(c),d=["%","/","?",";","#"].concat(h),p=["/","?","#"],m=/^[+a-z0-9A-Z_-]{0,63}$/,v=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E=e(7);n.prototype.parse=function(e,t,r){if(!a.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),o=-1!==n&&n<e.indexOf("#")?"?":"#",u=e.split(o),f=/\\/g;u[0]=u[0].replace(f,"/");var c=e=u.join(o);if(c=c.trim(),!r&&1===e.split("#").length){var b=l.exec(c);if(b)return this.path=c,this.href=c,this.pathname=b[1],b[2]?(this.search=b[2],this.query=t?E.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var _=i.exec(c);if(_){var w=(_=_[0]).toLowerCase();this.protocol=w,c=c.substr(_.length)}if(r||_||c.match(/^\/\/[^@\/]+@[^@\/]+/)){var F="//"===c.substr(0,2);!F||_&&g[_]||(c=c.substr(2),this.slashes=!0)}if(!g[_]&&(F||_&&!S[_])){for(var A=-1,O=0;O<p.length;O++)-1!==(T=c.indexOf(p[O]))&&(-1===A||T<A)&&(A=T);var k,I;-1!==(I=-1===A?c.lastIndexOf("@"):c.lastIndexOf("@",A))&&(k=c.slice(0,I),c=c.slice(I+1),this.auth=decodeURIComponent(k)),A=-1;for(O=0;O<d.length;O++){var T=c.indexOf(d[O]);-1!==T&&(-1===A||T<A)&&(A=T)}-1===A&&(A=c.length),this.host=c.slice(0,A),c=c.slice(A),this.parseHost(),this.hostname=this.hostname||"";var N="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!N)for(var C=this.hostname.split(/\./),O=0,R=C.length;O<R;O++){var L=C[O];if(L&&!L.match(m)){for(var U="",j=0,x=L.length;j<x;j++)L.charCodeAt(j)>127?U+="x":U+=L[j];if(!U.match(m)){var q=C.slice(0,O),P=C.slice(O+1),M=L.match(v);M&&(q.push(M[1]),P.unshift(M[2])),P.length&&(c="/"+P.join(".")+c),this.hostname=q.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=s.toASCII(this.hostname));var B=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+B,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==c[0]&&(c="/"+c))}if(!y[w])for(var O=0,R=h.length;O<R;O++){var D=h[O];if(-1!==c.indexOf(D)){var V=encodeURIComponent(D);V===D&&(V=escape(D)),c=c.split(D).join(V)}}var z=c.indexOf("#");-1!==z&&(this.hash=c.substr(z),c=c.slice(0,z));var K=c.indexOf("?");if(-1!==K?(this.search=c.substr(K),this.query=c.substr(K+1),t&&(this.query=E.parse(this.query)),c=c.slice(0,K)):t&&(this.search="",this.query={}),c&&(this.pathname=c),S[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",$=this.search||"";this.path=B+$}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(s=E.stringify(this.query));var i=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||S[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),i&&"?"!==i.charAt(0)&&(i="?"+i),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),i=i.replace("#","%23"),t+o+r+i+n},n.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(a.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,o=Object.keys(this),s=0;s<o.length;s++){var i=o[s];r[i]=this[i]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),l=0;l<u.length;l++){var f=u[l];"protocol"!==f&&(r[f]=e[f])}return S[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!S[e.protocol]){for(var c=Object.keys(e),h=0;h<c.length;h++){var d=c[h];r[d]=e[d]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||g[e.protocol])r.pathname=e.pathname;else{for(w=(e.pathname||"").split("/");w.length&&!(e.host=w.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==w[0]&&w.unshift(""),w.length<2&&w.unshift(""),r.pathname=w.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var p=r.pathname||"",m=r.search||"";r.path=p+m}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),E=y||v||r.host&&e.pathname,b=E,_=r.pathname&&r.pathname.split("/")||[],w=e.pathname&&e.pathname.split("/")||[],F=r.protocol&&!S[r.protocol];if(F&&(r.hostname="",r.port=null,r.host&&(""===_[0]?_[0]=r.host:_.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===w[0]?w[0]=e.host:w.unshift(e.host)),e.host=null),E=E&&(""===w[0]||""===_[0])),y)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,_=w;else if(w.length)_||(_=[]),_.pop(),_=_.concat(w),r.search=e.search,r.query=e.query;else if(!a.isNullOrUndefined(e.search))return F&&(r.hostname=r.host=_.shift(),(N=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=N.shift(),r.host=r.hostname=N.shift())),r.search=e.search,r.query=e.query,a.isNull(r.pathname)&&a.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!_.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var A=_.slice(-1)[0],O=(r.host||e.host||_.length>1)&&("."===A||".."===A)||""===A,k=0,I=_.length;I>=0;I--)"."===(A=_[I])?_.splice(I,1):".."===A?(_.splice(I,1),k++):k&&(_.splice(I,1),k--);if(!E&&!b)for(;k--;k)_.unshift("..");!E||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),O&&"/"!==_.join("/").substr(-1)&&_.push("");var T=""===_[0]||_[0]&&"/"===_[0].charAt(0);if(F){r.hostname=r.host=T?"":_.length?_.shift():"";var N=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");N&&(r.auth=N.shift(),r.host=r.hostname=N.shift())}return(E=E||r.host&&_.length)&&!T&&_.unshift(""),_.length?r.pathname=_.join("/"):(r.pathname=null,r.path=null),a.isNull(r.pathname)&&a.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=u.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{4:4,7:7,9:9}],9:[function(e,t,r){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(e(3)),o={};o.version="4.1.3",o.html5media={properties:["volume","src","currentTime","muted","duration","paused","ended","buffered","error","networkState","readyState","seeking","seekable","currentSrc","preload","bufferedBytes","bufferedTime","initialTime","startOffsetTime","defaultPlaybackRate","playbackRate","played","autoplay","loop","controls"],readOnlyProperties:["duration","paused","ended","buffered","error","networkState","readyState","seeking","seekable"],methods:["load","play","pause","canPlayType"],events:["loadstart","durationchange","loadedmetadata","loadeddata","progress","canplay","canplaythrough","suspend","abort","error","emptied","stalled","play","playing","pause","waiting","seeking","seeked","timeupdate","ended","ratechange","volumechange"],mediaTypes:["audio/mp3","audio/ogg","audio/oga","audio/wav","audio/x-wav","audio/wave","audio/x-pn-wav","audio/mpeg","audio/mp4","video/mp4","video/webm","video/ogg","video/ogv"]},n.default.mejs=o,r.default=o},{3:3}],11:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.renderer=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(e(10)),i=function(){function e(){n(this,e),this.renderers={},this.order=[]}return s(e,[{key:"add",value:function(e){if(void 0===e.name)throw new TypeError("renderer must contain at least `name` property");this.renderers[e.name]=e,this.order.push(e.name)}},{key:"select",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=t.length;if(t=t.length?t:this.order,!r){var n=[/^(html5|native)/i,/^flash/i,/iframe$/i],o=function(e){for(var t=0,r=n.length;t<r;t++)if(n[t].test(e))return t;return n.length};t.sort(function(e,t){return o(e)-o(t)})}for(var s=0,a=t.length;s<a;s++){var i=t[s],u=this.renderers[i];if(null!==u&&void 0!==u)for(var l=0,f=e.length;l<f;l++)if("function"==typeof u.canPlayType&&"string"==typeof e[l].type&&u.canPlayType(e[l].type))return{rendererName:u.name,src:e[l].src}}return null}},{key:"order",set:function(e){if(!Array.isArray(e))throw new TypeError("order must be an array of strings.");this._order=e},get:function(){return this._order}},{key:"renderers",set:function(e){if(null!==e&&"object"!==(void 0===e?"undefined":o(e)))throw new TypeError("renderers must be an array of objects.");this._renderers=e},get:function(){return this._renderers}}]),e}(),u=r.renderer=new i;a.default.Renderers=u},{10:10}],12:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=n(e(3)),i=n(e(2)),u=n(e(10)),l=e(11),f=e(14),c=e(13),h=function(){function t(e){o(this,t);var r=this;r.media=e,r.mediaSource=null,r.socket=null,r.sourceBuffer=null,r.queue=[],r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.logger=console}return s(t,[{key:"reset",value:function(){var e=this;e.media.pause(),e.pause=!1,e.appending=!1,e.eos=!1,e._eos=!1,e._lost=!1,e.socket&&(e.socket.close(),e.socket=null),e.queue.length&&e.queue.splice(0,e.queue.length),e.mediaSource&&e.sourceBuffer&&(e.sourceBuffer.removeEventListener("updateend",this.onsbue),e.sourceBuffer.removeEventListener("error",this.onsbe),e.mediaSource.removeEventListener("sourceopen",e.onmso),e.mediaSource.removeEventListener("sourceclose",e.onmsc),delete e.mediaSource,e.mediaSource=null,e.sourceBuffer=null)}},{key:"start",value:function(){var e=this;(e.socket=io.connect()).on("connect",function(){if(e._lost)e.checkBuffer();else{var t=e.mediaSource=new MediaSource;e.onmso=e.onMediaSourceOpen.bind(e),e.onmsc=e.onMediaSourceClose.bind(e),t.addEventListener("sourceopen",e.onmso),t.addEventListener("sourceclose",e.onmsc),e.media.src=URL.createObjectURL(t),setTimeout(function(){return e.media.native_play()},0)}})}},{key:"retry",value:function(){var e=this;e.offset=e._offset,e.reset(),e.start()}},{key:"setSrc",value:function(e){var t=this;t.reset(),t.src=e,t.offset=0,t._offset=0,t.speed=1,t.duration=0,t.media.src=""}},{key:"play",value:function(){var e=this;e.socket?e.media.native_play():e.start()}},{key:"setCurrentTime",value:function(e){var t=this,r=t.getBuffered();e>r.start()&&e<r.end()?t.media.currentTime=(e-t.offset)/t.speed:(t.offset=e,t.reset(),t.start())}},{key:"setPlaybackRate",value:function(e){var t=this;e!=t.speed&&(t.offset=t.getCurrentTime(),t.speed=e,t.reset(),t.start())}},{key:"getSrc",value:function(){return this.src}},{key:"getCurrentTime",value:function(){var e=this,t=e.getDuration();return e._offset=e.offset+e.media.currentTime*e.speed,t>0&&e._offset+1>t&&e.mediaSource&&"open"===e.mediaSource.readyState&&e.mediaSource.endOfStream(),e._offset}},{key:"getPlaybackRate",value:function(){return this.speed}},{key:"getDuration",value:function(){return this.duration}},{key:"getBuffered",value:function(){var e=this,t=e.media.buffered;return{start:function(){return t.length?e.offset+t.start(0)*e.speed:0},end:function(){return t.length?e.offset+t.end(0)*e.speed:0},length:t.length}}},{key:"checkBuffer",value:function(){var e=this,t=e.getBuffered(),r=e.getCurrentTime();e._lost&&(r+1<t.end()?setTimeout(function(){e.checkBuffer()},1e3):e.retry())}},{key:"onMediaSourceOpen",value:function(){var t=this;t.sourceBuffer=t.mediaSource.addSourceBuffer('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),t.queue=[],t.sourceBuffer.addEventListener("updateend",this.onsbue),t.sourceBuffer.addEventListener("error",this.onsbe);var r=e(8);t.socket.emit("start",{file:r.parse(t.src).pathname,offset:t.offset,speed:t.speed}),t.socket.on("data",function(e){t.pause||t.socket.emit("ack",e.seq),t.queue.push(e),t.appending||t.doAppend()}),t.socket.on("mediainfo",function(e){t.duration=parseInt(e.format.duration)}),t.socket.on("verbose",function(e){t.logger.log(e)}),t.socket.on("eos",function(){t.eos=!0}),t.socket.on("error",function(){t.retry()}),t.socket.on("disconnect",function(e){"io client disconnect"==e||"io server disconnect"!=e&&"transport close"!=e&&t.eos||(t._lost=!0,t.checkBuffer())})}},{key:"onMediaSourceClose",value:function(){}},{key:"doEos",value:function(){var e=this;if(e.eos&&!e._eos){if("open"===e.mediaSource.readyState&&!e.sourceBuffer.updating)try{e.mediaSource.endOfStream(),e._eos=!0}catch(t){e.logger.log(t)}e._eos||setTimeout(function(){e.doEos()},500)}}},{key:"needAppend",value:function(){var e=this,t=!0,r=e.getBuffered(),n=e.getDuration(),o=e.getCurrentTime();return r.start()>e.offset&&o<(r.start()+r.end())/2&&(t=!1),n-r.end()<=1*e.speed&&(t=!1,e.logger.log("Buffer Full"+n),n-o<=1*e.speed&&(e.logger.log("Trigger EOS"),e.queue=[])),t}},{key:"doAppend",value:function(){var e=this;if(e.sourceBuffer&&!e.sourceBuffer.updating)if(e.queue.length>0)if(e.queue.length>512&&!e.pause?(e.pause=!0,e.socket.emit("pause")):e.queue.length<512&&e.pause&&(e.pause=!1,e.socket.emit("continue")),e.needAppend()){var t=e.queue.shift();try{e.sourceBuffer.appendBuffer(t.buffer),e.appending=!0}catch(r){e.queue.unshift(t),setTimeout(function(){e.doAppend()},1e3)}}else setTimeout(function(){e.doAppend()},100);else e.eos&&e.doEos()}},{key:"onSBUpdateEnd",value:function(){var e=this;e.queue.length>0?setTimeout(function(){e.doAppend()}):e.appending=!1}},{key:"onSBUpdateError",value:function(e){return this.logger.log(e),!0}}]),t}(),d={name:"vod",options:{prefix:"vod"},canPlayType:function(e){var t=i.default.createElement("video");return c.HAS_MSE&&t.canPlayType?t.canPlayType(e.toLowerCase()).replace(/no/,""):""},create:function(e,t,r){var n=e.id+"_"+t.prefix,o=null,s=null;void 0===e.originalNode||null===e.originalNode?(o=i.default.createElement("audio"),e.appendChild(o)):o=e.originalNode,o.setAttribute("id",n),s=new h(o);for(var a=u.default.html5media.properties,c=0,d=a.length;c<d;c++)!function(e){var t=""+e.substring(0,1).toUpperCase()+e.substring(1);o["get"+t]=function(){if(null==s)return null;switch(e){case"src":return s.getSrc();case"playbackRate":return s.getPlaybackRate();case"duration":return s.getDuration();case"currentTime":return s.getCurrentTime();case"buffered":return s.getBuffered();default:return o[e]}},o["set"+t]=function(t){if(-1===u.default.html5media.readOnlyProperties.indexOf(e)&&null!=s)switch(e){case"src":s.setSrc(t);break;case"playbackRate":s.setPlaybackRate(t);break;case"currentTime":s.setCurrentTime(t);break;default:o[e]=t}}}(a[c]);for(var p=u.default.html5media.events.concat(["click","mouseover","mouseout"]),m=0,v=p.length;m<v;m++)!function(t){o.addEventListener(t,function(t){if("error"==t.type)return!0;var r=(0,f.createEvent)(t.type,e);e.dispatchEvent(r)})}(p[m]);if(o.setSize=function(e,t){return o.style.width=e+"px",o.style.height=t+"px",o},o.hide=function(){return o.style.display="none",o},o.show=function(){return o.style.display="",o},o.native_play=o.play,o.play=function(){s.play()},r&&r.length>0)for(var y=0,g=r.length;y<g;y++)if(l.renderer.renderers[t.prefix].canPlayType(r[y].type)){s.setSrc(r[y].src);break}var S=(0,f.createEvent)("rendererready",o);return e.dispatchEvent(S),o}};a.default.VODElement=u.default.VODElement=d,l.renderer.add(d)},{10:10,11:11,13:13,14:14,2:2,3:3,8:8}],13:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.cancelFullScreen=r.requestFullScreen=r.isFullScreen=r.FULLSCREEN_EVENT_NAME=r.HAS_NATIVE_FULLSCREEN_ENABLED=r.HAS_TRUE_NATIVE_FULLSCREEN=r.HAS_IOS_FULLSCREEN=r.HAS_MS_NATIVE_FULLSCREEN=r.HAS_MOZ_NATIVE_FULLSCREEN=r.HAS_WEBKIT_NATIVE_FULLSCREEN=r.HAS_NATIVE_FULLSCREEN=r.SUPPORTS_NATIVE_HLS=r.SUPPORT_POINTER_EVENTS=r.HAS_MSE=r.IS_STOCK_ANDROID=r.IS_SAFARI=r.IS_FIREFOX=r.IS_CHROME=r.IS_EDGE=r.IS_IE=r.IS_ANDROID=r.IS_IOS=r.IS_IPOD=r.IS_IPHONE=r.IS_IPAD=r.UA=r.NAV=void 0;for(var o=n(e(3)),s=n(e(2)),a=n(e(10)),i=r.NAV=o.default.navigator,u=r.UA=i.userAgent.toLowerCase(),l=r.IS_IPAD=/ipad/i.test(u)&&!o.default.MSStream,f=r.IS_IPHONE=/iphone/i.test(u)&&!o.default.MSStream,c=r.IS_IPOD=/ipod/i.test(u)&&!o.default.MSStream,h=(r.IS_IOS=/ipad|iphone|ipod/i.test(u)&&!o.default.MSStream,r.IS_ANDROID=/android/i.test(u)),d=r.IS_IE=/(trident|microsoft)/i.test(i.appName),p=(r.IS_EDGE="msLaunchUri"in i&&!("documentMode"in s.default)),m=r.IS_CHROME=/chrome/i.test(u),v=r.IS_FIREFOX=/firefox/i.test(u),y=r.IS_SAFARI=/safari/i.test(u)&&!m,g=r.IS_STOCK_ANDROID=/^mozilla\/\d+\.\d+\s\(linux;\su;/i.test(u),S=(r.HAS_MSE="MediaSource"in o.default),E=(r.SUPPORT_POINTER_EVENTS=function(){var e=s.default.createElement("x"),t=s.default.documentElement,r=o.default.getComputedStyle;if(!("pointerEvents"in e.style))return!1;e.style.pointerEvents="auto",e.style.pointerEvents="x",t.appendChild(e);var n=r&&"auto"===r(e,"").pointerEvents;return e.remove(),!!n}()),b=["source","track","audio","video"],_=void 0,w=0,F=b.length;w<F;w++)_=s.default.createElement(b[w]);var A=r.SUPPORTS_NATIVE_HLS=y||h&&(m||g)||d&&/edge/i.test(u),O=void 0!==_.webkitEnterFullscreen,k=void 0!==_.requestFullscreen;O&&/mac os x 10_5/i.test(u)&&(k=!1,O=!1);var I=void 0!==_.webkitRequestFullScreen,T=void 0!==_.mozRequestFullScreen,N=void 0!==_.msRequestFullscreen,C=I||T||N,R=C,L="",U=void 0,j=void 0,x=void 0;T?R=s.default.mozFullScreenEnabled:N&&(R=s.default.msFullscreenEnabled),m&&(O=!1),C&&(I?L="webkitfullscreenchange":T?L="mozfullscreenchange":N&&(L="MSFullscreenChange"),r.isFullScreen=U=function(){return T?s.default.mozFullScreen:I?s.default.webkitIsFullScreen:N?null!==s.default.msFullscreenElement:void 0},r.requestFullScreen=j=function(e){I?e.webkitRequestFullScreen():T?e.mozRequestFullScreen():N&&e.msRequestFullscreen()},r.cancelFullScreen=x=function(){I?s.default.webkitCancelFullScreen():T?s.default.mozCancelFullScreen():N&&s.default.msExitFullscreen()});var q=r.HAS_NATIVE_FULLSCREEN=k,P=r.HAS_WEBKIT_NATIVE_FULLSCREEN=I,M=r.HAS_MOZ_NATIVE_FULLSCREEN=T,B=r.HAS_MS_NATIVE_FULLSCREEN=N,H=r.HAS_IOS_FULLSCREEN=O,D=r.HAS_TRUE_NATIVE_FULLSCREEN=C,V=r.HAS_NATIVE_FULLSCREEN_ENABLED=R,z=r.FULLSCREEN_EVENT_NAME=L;r.isFullScreen=U,r.requestFullScreen=j,r.cancelFullScreen=x,a.default.Features=a.default.Features||{},a.default.Features.isiPad=l,a.default.Features.isiPod=c,a.default.Features.isiPhone=f,a.default.Features.isiOS=a.default.Features.isiPhone||a.default.Features.isiPad,a.default.Features.isAndroid=h,a.default.Features.isIE=d,a.default.Features.isEdge=p,a.default.Features.isChrome=m,a.default.Features.isFirefox=v,a.default.Features.isSafari=y,a.default.Features.isStockAndroid=g,a.default.Features.hasMSE=S,a.default.Features.supportsNativeHLS=A,a.default.Features.supportsPointerEvents=E,a.default.Features.hasiOSFullScreen=H,a.default.Features.hasNativeFullscreen=q,a.default.Features.hasWebkitNativeFullScreen=P,a.default.Features.hasMozNativeFullScreen=M,a.default.Features.hasMsNativeFullScreen=B,a.default.Features.hasTrueNativeFullScreen=D,a.default.Features.nativeFullScreenEnabled=V,a.default.Features.fullScreenEventName=z,a.default.Features.isFullScreen=U,a.default.Features.requestFullScreen=j,a.default.Features.cancelFullScreen=x},{10:10,2:2,3:3}],14:[function(e,t,r){"use strict";function n(e){if("string"!=typeof e)throw new Error("Argument passed must be a string");var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};return e.replace(/[&<>"]/g,function(e){return t[e]})}function o(e,t){var r=this,n=arguments,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("function"!=typeof e)throw new Error("First argument must be a function");if("number"!=typeof t)throw new Error("Second argument must be a numeric value");var s=void 0;return function(){var a=r,i=n,u=o&&!s;clearTimeout(s),s=setTimeout(function(){s=null,o||e.apply(a,i)},t),u&&e.apply(a,i)}}function s(e){return Object.getOwnPropertyNames(e).length<=0}function a(e,t){var r=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/,n={d:[],w:[]};return(e||"").split(" ").forEach(function(e){var o=e+(t?"."+t:"");o.startsWith(".")?(n.d.push(o),n.w.push(o)):n[r.test(e)?"w":"d"].push(o)}),n.d=n.d.join(" "),n.w=n.w.join(" "),n}function i(e,t){if("string"!=typeof e)throw new Error("Event name must be a string");var r=e.match(/([a-z]+\.([a-z]+))/i),n={target:t};return null!==r&&(e=r[1],n.namespace=r[2]),new window.CustomEvent(e,{detail:n})}function u(e,t){return!!(e&&t&&2&e.compareDocumentPosition(t))}function l(e){return"string"==typeof e}Object.defineProperty(r,"__esModule",{value:!0}),r.escapeHTML=n,r.debounce=o,r.isObjectEmpty=s,r.splitEvents=a,r.createEvent=i,r.isNodeAfter=u,r.isString=l;var f=function(e){return e&&e.__esModule?e:{default:e}}(e(10));f.default.Utils=f.default.Utils||{},f.default.Utils.escapeHTML=n,f.default.Utils.debounce=o,f.default.Utils.isObjectEmpty=s,f.default.Utils.splitEvents=a,f.default.Utils.createEvent=i,f.default.Utils.isNodeAfter=u,f.default.Utils.isString=l},{10:10}]},{},[12]);